extends ../layouts/app-layout

block styles
  link(rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css")

block content
  div.py-10.pt-2
    h1(class="text-4xl my-10 mt-5 font-extrabold text-center") Bienes 
      span.font-normal Raíces
    h2(class='text-center text-5xl font-extrabold')= page

    if errors 
      div(class="max-w-md mx-auto my-5")
        each error in errors 
          p(class="bg-red-600 text-white uppercase text-sm text-center p-2 mb-1 font-bold")= error.msg

    div(class="bg-white shadow py-8 px-4 round mx-auto max-w-4xl my-5 md:px-10")
      form(class="space-y-8" method="POST") 
        div(class="space-y-4")
          h3(class="text-lg leading-6 font-medium text-gray-900") Información General
          p(class="text-gray-600") Añade información sobre la propiedad en venta

          div 
            label(for="title" class="block text-sm uppercase text-gray-500 mb-2 font-bold") Titulo de anuncio
            input(type="text" id="title" name="title" value=data.title ? data.title : '' placeholder="Titulo Propiedad, ej. Casa en la playa" class="w-full px-3 py-2 border border-gray-300 outline-none rounded-md placeholder-gray-400")

          div 
            label(for="description" class="block text-sm uppercase text-gray-500 mb-2 font-bold") Descripción
            textarea(id="description" name="description" placeholder="Descripción de la Propiedad." class="w-full px-3 py-2 border border-gray-300 outline-none rounded-md placeholder-gray-400")= data.description ? data.description : ''

          div(class="md:flex md:gap-4 space-y-4 md:space-y-0")
            div(class="md:w-1/2")
              label(for="category" class="block text-sm uppercase text-gray-500 mb-2 font-bold") Categoría
              select(id="category" name="category" class="w-full px-3 py-2 border border-gray-300 outline-none rounded-md placeholder-gray-400")
                option(value="") - Seleccione -
                each category in categories 
                  option(value=category.id selected=data.categoryId ? data.categoryId == category.id ? true : false : null)= category.name

            div(class="md:w-1/2")
              label(for="price" class="block text-sm uppercase text-gray-500 mb-2 font-bold") Precio
              select(id="price" name="price" class="w-full px-3 py-2 border border-gray-300 outline-none rounded-md placeholder-gray-400")
                option(value="") - Seleccione -
                each price in prices 
                  option(value=price.id selected=data.priceId ? data.priceId == price.id ? true : false : null)= price.name

          div(class="md:flex md:gap-4 space-y-4 md:space-y-0")
            div(class="md:w-1/3")
              label(for="rooms" class="block text-sm uppercase text-gray-500 mb-2 font-bold") Habitaciones
              select(id="rooms" name="rooms" class="w-full px-3 py-2 border border-gray-300 outline-none rounded-md placeholder-gray-400")
                option(value="") - Seleccione -
                - let n = 0;
                  while n < 10
                    option(value=n selected=data.rooms ? data.rooms == n ? true : false : null) #{n++} 

            div(class="md:w-1/3")
              label(for="parking" class="block text-sm uppercase text-gray-500 mb-2 font-bold") Estacionamiento
              select(id="parking" name="parking" class="w-full px-3 py-2 border border-gray-300 outline-none rounded-md placeholder-gray-400")
                option(value="") - Seleccione -
                - n = 0;
                  while n < 5
                    option(value=n selected=data.parking ? data.parking == n ? true : false : null) #{n++}

            div(class="md:w-1/3")
              label(for="wc" class="block text-sm uppercase text-gray-500 mb-2 font-bold") Baños
              select(id="wc" name="wc" class="w-full px-3 py-2 border border-gray-300 outline-none rounded-md placeholder-gray-400")
                option(value="") - Seleccione -
                - n = 0;
                  while n < 7
                    option(value=n selected=data.wc ? data.wc == n ? true : false : null) #{n++}

          div(class="border-gray-200 border-t py-5 space-y-4")
            h3(class="text-lg leading-6 font-medium text-gray-900") Ubicación
            p(class="text-gray-600") Ubica la propiedad en el mapa
            #mapa(class="h-96")

            div 
              p.address= data.street ? data.street : ''
              p(class="complete-address text-sm text-gray-600")

            input(type="hidden" name="street" id="street" value=data.street ? data.street : '')
            input(type="hidden" name="lat" id="lat" value=data.lat ? data.lat : '')
            input(type="hidden" name="lng" id="lng" value=data.lng ? data.lng : '')

          input(type="submit" value="Guardar cambios" class="w-full py-3 bg-indigo-600 hover:bg-indigo-700 rounded text-white font-bold uppercase cursor-pointer")

block scripts 
  script(src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js")
  script(src="https://unpkg.com/esri-leaflet@3.0.8/dist/esri-leaflet.js")
  script(src="https://unpkg.com/esri-leaflet-geocoder@2.2.13/dist/esri-leaflet-geocoder.js")
  script(src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-geosearch/2.7.0/bundle.min.js")
  script(src="/js/map.js") 
